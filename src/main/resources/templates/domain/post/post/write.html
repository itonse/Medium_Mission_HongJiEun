<html layout:decorate="~{global/layout}">

<div layout:fragment="content" class="p-2">
    <h1 class="font-bold mb-2"><i class="fa-solid fa-user-plus"></i> 글 작성</h1>

    <form th:object="${writeForm}" method="POST" onsubmit="submitWriteForm(this); return false;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

        <!-- 공개글 여부 -->
        <div class="form-control">
            <label class="label">
                <span class="label-text">공개글</span>
                <input type="checkbox" name="published" class="toggle toggle-lg" value="true">
            </label>
        </div>

        <!-- title 입력 필드 -->
        <div class="form-control">
            <label class="label">
                <span class="label-text">제목</span>
            </label>
            <input type="text" name="title" placeholder="제목을 입력해주세요."
                   class="input input-bordered">
        </div>

        <!-- body 입력 필드 -->
        <div class="form-control">
            <label class="label">
                <span class="label-text">내용</span>
            </label>
            <textarea name="body" id="body" class="form-control" rows="10" placeholder="내용을 입력해주세요."></textarea>
        </div>

        <!-- 작성 버튼 -->
        <button type="submit">작성</button>
    </form>

    <script>
        function submitWriteForm(form) {
            form.title.value = form.title.value.trim();
            if (form.title.value.length == 0) {
                alert('제목을 입력해주세요.');
                form.title.focus();
                return;
            }

            form.body.value = form.body.value.trim();
            if (form.body.value.length == 0) {
                alert('내용을 입력해주세요.');
                form.body.focus();
                return;
            }

            form.submit();
        }
    </script>
</div>
</html>
